<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css">
		* {
			margin: 0;
			padding: 0;
		}
		#carousel {
			position: relative;
			width: 560px;
			height: 300px;
			margin: 0 auto;
			overflow: hidden;
		}
		/*æ»šåŠ¨è½®æ’­å›¾çš„å…³é”®ï¼š unitçš„å®½åº¦è¦è¶³å¤Ÿå®½ æ‰€æœ‰å›¾ç‰‡å¹¶æ’åœ¨ä¸€èµ·*/
		#carousel #unit {
			position: absolute;
			width: 5000px;
			height: 300px;
			left: 0;
			top: 0;
		}
		#carousel #unit li {
			float: left;
			list-style: none;
		}
	</style>
</head>
<body>
	<div id="carousel">
		<ul id="unit">
			<li><img src="images/0.jpg" alt=""></li>
			<li><img src="images/1.jpg" alt=""></li>
			<li><img src="images/2.jpg" alt=""></li>
			<li><img src="images/3.jpg" alt=""></li>
			<li><img src="images/4.jpg" alt=""></li>
			<li><img src="images/0.jpg" alt=""></li>
		</ul>
	</div>
	<script type="text/javascript" src="js/animate.js"></script>
	<script type="text/javascript" src="js/bindEvent.js"></script>
	<script type="text/javascript">
	// ä»¥ä¸‹ä½¿ç”¨çš„æ˜¯é¢å‘è¿‡ç¨‹çš„ä¹¦å†™æ–¹å¼ï¼š
	// è·å–å…ƒç´ 
	// var unit = document.getElementById("unit");
	// var carousel = document.getElementById("carousel");
	// // å®šä¹‰å®½åº¦
	// var width = carousel.clientWidth;
	// // å®šä¹‰length
	// var length = document.getElementsByTagName("li").length - 1;

	// // å®šä¹‰é”
	// var lock = true;
	// // å®šä¹‰ä¿¡å·é‡
	// var idx = 0;

	// // ç»‘å®šäº‹ä»¶
	// bindEvent(unit, "mousewheel", function(e) {
	// 	// å‡½æ•°èŠ‚æµ
	// 	if (!lock) {
	// 		return;
	// 	}
	// 	// å…³é—­é”
	// 	lock = false;
	// 	// console.log(direction(e));
	// 	// å¦‚æœè¿”å›true ç›¸å½“äºå³æŒ‰é’®ç‚¹å‡»äº‹ä»¶
	// 	if (direction(e)) {
	// 		// å›¾ç‰‡åº”è¯¥ä»å³è¾¹è¿›æ¥
	// 		// æ‹‰åŠ¨ç­–ç•¥ï¼š å…ˆæ‹‰åŠ¨ å†ç¬ç§»
	// 		idx++;
	// 		// æ‹‰åŠ¨
	// 		animate(unit, {left: - idx * width}, 1000, function() {
	// 			// éªŒè¯ä¿¡å·é‡äº†
	// 			if (idx > length - 1) {
	// 				// idx å½’0
	// 				idx = 0;
	// 				// æ‹‰å›åŸä½
	// 				unit.style.left = 0;
	// 			}
	// 			// å¼€é”
	// 			lock = true;
	// 		})
	// 	} else {
	// 		// å›¾ç‰‡åº”è¯¥ä»å·¦ä¾§è¿›å…¥ ç›¸å½“äºå·¦æŒ‰é’®äº‹ä»¶
	// 		// æ‹‰åŠ¨ç­–ç•¥ï¼š å…ˆç¬ç§» å†æ‹‰åŠ¨
	// 		idx--;
	// 		// è¾¹ç•Œåˆ¤å®š
	// 		if (idx < 0) {
	// 			idx = length - 1;
	// 			// ç¬ç§»åˆ°çŒ«è…»å›¾
	// 			unit.style.left = - length * width + "px";
	// 		}
	// 		// æ‹‰åŠ¨
	// 		animate(unit, {left: - idx * width}, 1000, function() {
	// 			// å¼€é”
	// 			lock = true;
	// 		})
	// 	}
	// })	

	// // å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œ æ¥å—ä¸€ä¸ªäº‹ä»¶å¯¹è±¡ï¼Œè¿”å›æ»šè½®æ»šåŠ¨çš„æ–¹å‘
	function direction(e) {
		// ä½¿ç”¨e.wheelDelta æ¥åˆ¤æ–­æ˜¯å¦æ˜¯undefined ä»è€Œåˆ¤æ–­æ˜¯å“ªä¸ªæµè§ˆå™¨
		// console.log(e.wheelDelta);
		if (typeof e.wheelDelta === "undefined") {
			// console.log("æ˜¯ç«ç‹");
			// åˆ¤æ–­æ»šè½®æ–¹å‘
			if (e.detail > 0) {
				// console.log("å‘ä¸‹æ»šåŠ¨");
				return true;
			} else {
				// console.log("å‘ä¸Šæ»šåŠ¨");
				return false;
			}
		} else {
			// console.log("ä¸æ˜¯ç«ç‹");
			if (e.wheelDelta > 0) {
				// console.log("å‘ä¸Šæ»šåŠ¨");
				return false;
			} else {
				// console.log("å‘ä¸‹æ»šåŠ¨");
				return true;
			}
		}
	}

	// ä»¥ä¸‹ä½¿ç”¨çš„æ˜¯é¢å‘å¯¹è±¡çš„ä¹¦å†™æ–¹å¼ï¼š
	// æˆ‘ä»¬è¦æŠŠcarouselçœ‹æˆä¸€ä¸ªå¯¹è±¡
	// æ—¢ç„¶carouselæ˜¯ä¸€ä¸ªå¯¹è±¡äº†ï¼Œå°±å¯ä»¥æ‹¥æœ‰ä¸€äº›å±æ€§æˆ–è€…æ–¹æ³•

	// å®šä¹‰carouselå¯¹è±¡
	var carousel = {
		// å®¹å™¨å±æ€§
		dom: document.getElementById("carousel"),
		// å›¾ç‰‡åˆ—è¡¨å±æ€§
		unit: document.getElementById("unit"),
		// å®šä¹‰lengthå±æ€§
		length: document.getElementsByTagName("li").length - 1,
		// å®šä¹‰é”
		lock: true,
		// å®šä¹‰ä¿¡å·é‡
		idx: 0,
		
		// å›¾ç‰‡å‘å·¦çš„æ–¹æ³• ç›¸å½“äºå³æŒ‰é’®ç‚¹å‡»äº‹ä»¶
		left: function() {
			// å‡½æ•°èŠ‚æµ
			if (!this.lock) {
				return;
			}
			// å…³é—­é”
			this.lock = false;
			// å¤‡ä»½this
			var me = this;
			// ä¿¡å·é‡æ”¹å˜
			this.idx++;
			// æ‹‰åŠ¨
			animate(this.unit, {"left": -this.idx * this.dom.clientWidth}, 1000, function() {
				// éªŒè¯ä¿¡å·é‡
				if (me.idx > me.length - 1) {
					// è®©idx å½’0
					me.idx = 0;
					// æ‹‰å›åŸä½
					me.unit.style.left = 0;
				}
				// å¼€é”
				me.lock = true;
			})
		},
		// å›¾ç‰‡å¾€å³æ–¹æ³•
		right:function(){
			if (!this.lock) {
				return;
			}
			// å…³é—­é”
			this.lock = false;
			this.idx--;
			var me=this;
			if (this.idx < 0) {
	 			me.idx = me.length - 1;
	 			// ç¬ç§»åˆ°çŒ«è…»å›¾
	 			//æ³¨æ„ï¼šæ”¹äº†å¥½ä¹…å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ   ğŸ‘‡ğŸ‘‡
	 			me.unit.style.left = -me.length * me.dom.clientWidth + "px";
	 		}
			animate(this.unit, {left: - this.idx *this.dom.clientWidth}, 1000, function() {
	 			// å¼€é”
	 			me.lock = true;
	 		})
		}
		
	}

	// ç»™documentæ·»åŠ é¼ æ ‡æ»šè½®äº‹ä»¶
	document.onmousewheel = function(e) {
		if (direction(e)) {
			// è¯´æ˜æ˜¯å¾€ä¸‹æ»šåŠ¨ è°ƒç”¨carouselçš„leftæ–¹æ³•
			carousel.left();
		}else{
			carousel.right();
		}
	}

	</script>
</body>
</html>