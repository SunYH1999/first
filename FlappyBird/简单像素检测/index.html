<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css">
		* {
			margin: 0;
			padding: 0;
		}
		canvas {
			display: block;
			border: 1px solid red;
			margin: 0 auto;
		}
	</style>
</head>
<body>
	<canvas id="myCanvas" width="1000" height="600"></canvas>
	<script type="text/javascript">
	// 获取元素
	var canvas = document.getElementById("myCanvas");
	// 获取画笔
	var ctx = canvas.getContext("2d");

	// 绘制矩形
	// ctx.fillRect(0, 0, 100, 100);
	
	// ctx.globalCompositeOperation = "source-in";
	// // 改变填充色
	// ctx.fillStyle = "orange";
	// ctx.fillRect(50, 50, 100, 100);


	var x = 200;
	// 绘制圆
	// 开启路径
	function drawCircle() {
		ctx.beginPath();
		ctx.arc(x, 200, 100, 0, Math.PI * 2);
		// 闭合路径
		ctx.closePath();
		// 描边
		ctx.stroke();
	}

	// 绘制线
	// 开启路径
	function drawLine() {
		ctx.beginPath();
		ctx.moveTo(780, 70);
		ctx.lineTo(600, 480);
		// 闭合路径
		ctx.closePath();
		// 描边
		ctx.stroke();
	}

	// 开启定时器
	var timer = setInterval(function() {
		x++;
		// 清屏
		ctx.clearRect(0, 0, 1000, 600);
		// 保存状态
		ctx.save();
		// 渲染
		drawCircle();
		// 改变融合方式
		ctx.globalCompositeOperation = "source-in";
		drawLine();
		// 恢复状态
		ctx.restore();
		// 获取像素信息
		var imgData = ctx.getImageData(0, 0, 1000, 600);
		for (var i = 0; i < imgData.data.length; i++) {
			if (imgData.data[i]) {
				console.log("撞到了");
				return;
			}
		}
	}, 20)
	</script>
</body>
</html>